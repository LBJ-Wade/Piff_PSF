<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Models &mdash; Piff 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Piff 0.1 documentation" href="index.html" />
    <link rel="next" title="Interpolation Schemes" href="interp.html" />
    <link rel="prev" title="Input" href="input.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="interp.html" title="Interpolation Schemes"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="input.html" title="Input"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Piff 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="models">
<h1>Models<a class="headerlink" href="#models" title="Permalink to this headline">¶</a></h1>
<p>Models govern what functional form to use for the PSF at a single location.</p>
<div class="section" id="model">
<h2>Model<a class="headerlink" href="#model" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="piff.Model">
<em class="property">class </em><tt class="descclassname">piff.</tt><tt class="descname">Model</tt><a class="headerlink" href="#piff.Model" title="Permalink to this definition">¶</a></dt>
<dd><p>The base class for modeling a single PSF (i.e. no interpolation yet)</p>
<p>This is essentially an abstract base class intended to define the methods that should be
implemented by any derived class.</p>
<dl class="method">
<dt id="piff.Model.drawImage">
<tt class="descname">drawImage</tt><big>(</big><em>image</em>, <em>pos=None</em><big>)</big><a class="headerlink" href="#piff.Model.drawImage" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw the model on the given image.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>image</strong> &#8211; A galsim.Image on which to draw the model.</li>
<li><strong>pos</strong> &#8211; The position on the image at which to place the nominal center.
[default: None, which means to use the center of the image.]</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">image</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="piff.Model.fitStar">
<tt class="descname">fitStar</tt><big>(</big><em>star</em><big>)</big><a class="headerlink" href="#piff.Model.fitStar" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit the model parameters to the data for a single star.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>star</strong> &#8211; A StarData instance</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">self (for convenience of stringing together operations)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="piff.Model.getParameters">
<tt class="descname">getParameters</tt><big>(</big><big>)</big><a class="headerlink" href="#piff.Model.getParameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the parameters of the model, to be used by the interpolator.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a numpy array of the model parameters</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="piff.Model.parseKwargs">
<em class="property">classmethod </em><tt class="descname">parseKwargs</tt><big>(</big><em>config_model</em><big>)</big><a class="headerlink" href="#piff.Model.parseKwargs" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the model field of a configuration dict and return the kwargs to use for
initializing an instance of the class.</p>
<p>The base class implementation just returns the kwargs as they are, but derived classes
might want to override this if they need to do something more sophisticated with them.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>config_model</strong> &#8211; The model field of the configuration dict, config[&#8216;model&#8217;]</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">a kwargs dict to pass to the initializer</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="piff.Model.read">
<em class="property">classmethod </em><tt class="descname">read</tt><big>(</big><em>fits</em>, <em>extname</em><big>)</big><a class="headerlink" href="#piff.Model.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a Model from a FITS file.</p>
<p>Note: the returned Model will not have its parameters set.  This just initializes a fresh
model that can be used to interpret interpolated vectors.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>fits</strong> &#8211; An open fitsio.FITS object</li>
<li><strong>extname</strong> &#8211; The name of the extension with the model information.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a model built with a information in the FITS file.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="piff.Model.readKwargs">
<em class="property">classmethod </em><tt class="descname">readKwargs</tt><big>(</big><em>fits</em>, <em>extname</em><big>)</big><a class="headerlink" href="#piff.Model.readKwargs" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the kwargs from the data in a FITS binary table.</p>
<p>The base class implementation just reads each value in the table and uses the column
name for the name of the kwarg.  However, derived classes may want to do something more
sophisticated.  Also, they may want to read other extensions from the fits file
besides just extname.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>fits</strong> &#8211; An open fitsio.FITS object.</li>
<li><strong>extname</strong> &#8211; The name of the extension with the model information.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a kwargs dict to use to initialize the model</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="piff.Model.setParameters">
<tt class="descname">setParameters</tt><big>(</big><em>params</em><big>)</big><a class="headerlink" href="#piff.Model.setParameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the parameters of the model, typically provided by an interpolator.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>params</strong> &#8211; A numpy array of the model parameters</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">self</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="piff.Model.write">
<tt class="descname">write</tt><big>(</big><em>fits</em>, <em>extname</em><big>)</big><a class="headerlink" href="#piff.Model.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a Model to a FITS file.</p>
<p>Note: this only writes the initialization kwargs to the fits extension, not the parameters.</p>
<p>The base class implemenation works if the class has a self.kwargs attribute and these
are all simple values (str, float, or int)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>fits</strong> &#8211; An open fitsio.FITS object</li>
<li><strong>extname</strong> &#8211; The name of the extension to write the model information.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="gaussian">
<h2>Gaussian<a class="headerlink" href="#gaussian" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="piff.Gaussian">
<em class="property">class </em><tt class="descclassname">piff.</tt><tt class="descname">Gaussian</tt><a class="headerlink" href="#piff.Gaussian" title="Permalink to this definition">¶</a></dt>
<dd><p>An extremely simple PSF model that just considers the PSF as a sheared Gaussian.</p>
<dl class="method">
<dt id="piff.Gaussian.drawImage">
<tt class="descname">drawImage</tt><big>(</big><em>image</em>, <em>pos=None</em><big>)</big><a class="headerlink" href="#piff.Gaussian.drawImage" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw the model on the given image.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>image</strong> &#8211; A galsim.Image on which to draw the model.</li>
<li><strong>pos</strong> &#8211; The position on the image at which to place the nominal center.
[default: None, which means to use the center of the image.]</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">image</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="piff.Gaussian.fitStar">
<tt class="descname">fitStar</tt><big>(</big><em>star</em><big>)</big><a class="headerlink" href="#piff.Gaussian.fitStar" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit the image by running the HSM adaptive moments code on the image and using
the resulting moments as an estimate of the Gaussian size/shape.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>star</strong> &#8211; A StarData instance</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">self</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="piff.Gaussian.getParameters">
<tt class="descname">getParameters</tt><big>(</big><big>)</big><a class="headerlink" href="#piff.Gaussian.getParameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the parameters of the model, to be used by the interpolator.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a numpy array of the model parameters</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="piff.Gaussian.getProfile">
<tt class="descname">getProfile</tt><big>(</big><big>)</big><a class="headerlink" href="#piff.Gaussian.getProfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a version of the PSF model as a GalSim GSObject</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a galsim.GSObject instance</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="piff.Gaussian.setParameters">
<tt class="descname">setParameters</tt><big>(</big><em>params</em><big>)</big><a class="headerlink" href="#piff.Gaussian.setParameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the parameters of the model, typically provided by an interpolator.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>params</strong> &#8211; A numpy array of the model parameters</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">self</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Models</a><ul>
<li><a class="reference internal" href="#model">Model</a></li>
<li><a class="reference internal" href="#gaussian">Gaussian</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="input.html"
                        title="previous chapter">Input</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="interp.html"
                        title="next chapter">Interpolation Schemes</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/model.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="interp.html" title="Interpolation Schemes"
             >next</a> |</li>
        <li class="right" >
          <a href="input.html" title="Input"
             >previous</a> |</li>
        <li><a href="index.html">Piff 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2016, Mike Jarvis and the other collaborators at https://github.com/rmjarvis/Piff.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>