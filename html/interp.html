<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Interpolation Schemes &mdash; Piff 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Piff 0.1 documentation" href="index.html" />
    <link rel="next" title="Output" href="output.html" />
    <link rel="prev" title="Models" href="model.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="output.html" title="Output"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="model.html" title="Models"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Piff 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="interpolation-schemes">
<h1>Interpolation Schemes<a class="headerlink" href="#interpolation-schemes" title="Permalink to this headline">¶</a></h1>
<p>Interpolators goven how the model parameters are interpolated across the field of view.</p>
<div class="section" id="interp">
<h2>Interp<a class="headerlink" href="#interp" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="piff.Interp">
<em class="property">class </em><tt class="descclassname">piff.</tt><tt class="descname">Interp</tt><a class="headerlink" href="#piff.Interp" title="Permalink to this definition">¶</a></dt>
<dd><p>The base class for interpolating a set of data vectors across the field of view.</p>
<p>In general, the interpolator is agnostic as to the meaning of the parameter vectors.
These parameter vectors are passed as simple numpy arrays.  They are imbued meaning by
a Model instance.  Thus, the same interpolators may be used with many different Model
types.</p>
<p>The principal ways that interpolators will differ are</p>
<ol class="arabic simple">
<li>Which properties of the star are used for ther interpolation</li>
<li>What functional form (or algorithm) is used to interpolate between measurements.</li>
</ol>
<p>This is essentially an abstract base class intended to define the methods that should be
implemented by any derived class.</p>
<dl class="method">
<dt id="piff.Interp.getStarPosition">
<tt class="descname">getStarPosition</tt><big>(</big><em>star</em><big>)</big><a class="headerlink" href="#piff.Interp.getStarPosition" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the appropriate information out of a StarData object to create some sort
of position object.</p>
<p>The base class implementation returns the field position (u,v) as numpy.array.
The returned object will only be used by the Interp instance, so it may define this to
be whatever type is appropriate for its interpolation scheme.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>star</strong> &#8211; A StarData instances from which to extract the relevant properties.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">some kind of Position object; in the base class, a numpy.array instance.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="piff.Interp.getTargetPosition">
<tt class="descname">getTargetPosition</tt><big>(</big><em>image_pos</em>, <em>wcs</em>, <em>pointing</em>, <em>properties</em><big>)</big><a class="headerlink" href="#piff.Interp.getTargetPosition" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an appropriate position to use for an interpolation target.</p>
<p>The base class implementation returns the field position corresponding to a given
image position.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>image_pos</strong> &#8211; The position in chip coordinates to use as the target location.</li>
<li><strong>wcs</strong> &#8211; The wcs to use to connect image coordinates with sky coordinates.</li>
<li><strong>pointing</strong> &#8211; A galsim.CelestialCoord representing the pointing coordinate of the
exposure.  This is required if wcs is a CelestialWCS, but should
be None if wcs is a EuclideanWCS. [default: None]</li>
<li><strong>properties</strong> &#8211; A dict containing other properties that the interpolator needs to
perform the interpolation. [default: None]</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">the same kind of Position object that getStarPosition returns.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="piff.Interp.interpolate">
<tt class="descname">interpolate</tt><big>(</big><em>pos</em>, <em>logger=None</em><big>)</big><a class="headerlink" href="#piff.Interp.interpolate" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform the interpolation to find the interpolated parameter vector at some position.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pos</strong> &#8211; The position to which to interpolate.</li>
<li><strong>logger</strong> &#8211; A logger object for logging debug info. [default: None]</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">the parameter vector (a numpy array) interpolated to the given position.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="piff.Interp.interpolateList">
<tt class="descname">interpolateList</tt><big>(</big><em>pos_list</em>, <em>logger=None</em><big>)</big><a class="headerlink" href="#piff.Interp.interpolateList" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform the interpolation for a list of positions.</p>
<p>The base class just calls interpolate(pos) for each position in the list, but in many
cases, this may be more efficiently done with a matrix operation, so we make it
available for derived classes to override.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pos_list</strong> &#8211; A list (or numpy.array) of positions to which to interpolate.</li>
<li><strong>logger</strong> &#8211; A logger object for logging debug info. [default: None]</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a numpy array of parameter vectors for the given positions.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="piff.Interp.parseKwargs">
<em class="property">classmethod </em><tt class="descname">parseKwargs</tt><big>(</big><em>config_interp</em><big>)</big><a class="headerlink" href="#piff.Interp.parseKwargs" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the interp field of a configuration dict and return the kwargs to use for
initializing an instance of the class.</p>
<p>The base class implementation just returns the kwargs as they are, but derived classes
might want to override this if they need to do something more sophisticated with them.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>config_interp</strong> &#8211; The interp field of the configuration dict, config[&#8216;interp&#8217;]</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">a kwargs dict to pass to the initializer</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="piff.Interp.read">
<em class="property">classmethod </em><tt class="descname">read</tt><big>(</big><em>fits</em>, <em>extname</em><big>)</big><a class="headerlink" href="#piff.Interp.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read an Interp from a FITS file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>fits</strong> &#8211; An open fitsio.FITS object</li>
<li><strong>extname</strong> &#8211; The name of the extension with the interp information.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">an interpolator built with a information in the FITS file.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="piff.Interp.readKwargs">
<em class="property">classmethod </em><tt class="descname">readKwargs</tt><big>(</big><em>fits</em>, <em>extname</em><big>)</big><a class="headerlink" href="#piff.Interp.readKwargs" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the kwargs from the data in a FITS binary table.</p>
<p>The base class implementation just reads each value in the table and uses the column
name for the name of the kwarg.  However, derived classes may want to do something more
sophisticated.  Also, they may want to read other extensions from the fits file
besides just extname.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>fits</strong> &#8211; An open fitsio.FITS object.</li>
<li><strong>extname</strong> &#8211; The name of the extension with the interp information.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a kwargs dict to use to initialize the interp</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="piff.Interp.readSolution">
<tt class="descname">readSolution</tt><big>(</big><em>fits</em>, <em>extname</em><big>)</big><a class="headerlink" href="#piff.Interp.readSolution" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the solution from a FITS binary table.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>fits</strong> &#8211; An open fitsio.FITS object.</li>
<li><strong>extname</strong> &#8211; The name of the extension with the interp information.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="piff.Interp.solve">
<tt class="descname">solve</tt><big>(</big><em>pos</em>, <em>vectors</em>, <em>logger=None</em><big>)</big><a class="headerlink" href="#piff.Interp.solve" title="Permalink to this definition">¶</a></dt>
<dd><p>Solve for the interpolation coefficients given some data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>pos</strong> &#8211; A list of positions to use for the interpolation.</li>
<li><strong>vectors</strong> &#8211; A list of parameter vectors (numpy arrays) for each star.</li>
<li><strong>logger</strong> &#8211; A logger object for logging debug info. [default: None]</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="piff.Interp.write">
<tt class="descname">write</tt><big>(</big><em>fits</em>, <em>extname</em><big>)</big><a class="headerlink" href="#piff.Interp.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write an Interp to a FITS file.</p>
<p>Note: this only writes the initialization kwargs to the fits extension, not the parameters.</p>
<p>The base class implemenation works if the class has a self.kwargs attribute and these
are all simple values (str, float, or int).</p>
<p>However, the derived class will need to implement writeSolution to write the solution
parameters to a binary table.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>fits</strong> &#8211; An open fitsio.FITS object</li>
<li><strong>extname</strong> &#8211; The name of the extension to write the interp information.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="piff.Interp.writeSolution">
<tt class="descname">writeSolution</tt><big>(</big><em>fits</em>, <em>extname</em><big>)</big><a class="headerlink" href="#piff.Interp.writeSolution" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the solution parameters to a FITS file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>fits</strong> &#8211; An open fitsio.FITS object</li>
<li><strong>extname</strong> &#8211; The name of the extension to write the solution.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="mean">
<h2>Mean<a class="headerlink" href="#mean" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="piff.Mean">
<em class="property">class </em><tt class="descclassname">piff.</tt><tt class="descname">Mean</tt><a class="headerlink" href="#piff.Mean" title="Permalink to this definition">¶</a></dt>
<dd><p>The simplest possible interpolation scheme.  It just finds the mean of the parameter
vectors and uses that at every position.</p>
<dl class="method">
<dt id="piff.Mean.interpolate">
<tt class="descname">interpolate</tt><big>(</big><em>pos</em>, <em>logger=None</em><big>)</big><a class="headerlink" href="#piff.Mean.interpolate" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform the interpolation to find the interpolated parameter vector at some position.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pos</strong> &#8211; The position to which to interpolate.</li>
<li><strong>logger</strong> &#8211; A logger object for logging debug info. [default: None]</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">the parameter vector (a numpy array) interpolated to the given position.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="piff.Mean.readSolution">
<tt class="descname">readSolution</tt><big>(</big><em>fits</em>, <em>extname</em><big>)</big><a class="headerlink" href="#piff.Mean.readSolution" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the solution from a FITS binary table.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>fits</strong> &#8211; An open fitsio.FITS object.</li>
<li><strong>extname</strong> &#8211; The name of the extension with the interp information.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="piff.Mean.solve">
<tt class="descname">solve</tt><big>(</big><em>pos</em>, <em>vectors</em>, <em>logger=None</em><big>)</big><a class="headerlink" href="#piff.Mean.solve" title="Permalink to this definition">¶</a></dt>
<dd><p>Solve for the interpolation coefficients given some data.</p>
<p>Here the &#8220;solution&#8221; is just the mean.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>pos</strong> &#8211; A list of positions to use for the interpolation.</li>
<li><strong>vectors</strong> &#8211; A list of parameter vectors (numpy arrays) for each star.</li>
<li><strong>logger</strong> &#8211; A logger object for logging debug info. [default: None]</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="piff.Mean.writeSolution">
<tt class="descname">writeSolution</tt><big>(</big><em>fits</em>, <em>extname</em><big>)</big><a class="headerlink" href="#piff.Mean.writeSolution" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the solution from a FITS binary table.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>fits</strong> &#8211; An open fitsio.FITS object.</li>
<li><strong>extname</strong> &#8211; The name of the extension with the interp information.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Interpolation Schemes</a><ul>
<li><a class="reference internal" href="#interp">Interp</a></li>
<li><a class="reference internal" href="#mean">Mean</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="model.html"
                        title="previous chapter">Models</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="output.html"
                        title="next chapter">Output</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/interp.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="output.html" title="Output"
             >next</a> |</li>
        <li class="right" >
          <a href="model.html" title="Models"
             >previous</a> |</li>
        <li><a href="index.html">Piff 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2016, Mike Jarvis and the other collaborators at https://github.com/rmjarvis/Piff.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>